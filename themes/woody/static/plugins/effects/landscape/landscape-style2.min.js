function createLandscape(e){var t,n,a,i,r=document.querySelector(".landscape"),o=window.innerWidth,s=window.innerHeight,l={x:0,y:0,xDamped:0,yDamped:0},m=void 0!==window.orientation;function u(){(u=new THREE.Sky).scale.setScalar(45e4),u.material.uniforms.turbidity.value=1,u.material.uniforms.rayleigh.value=.01,u.material.uniforms.luminance.value=1,u.material.uniforms.mieCoefficient.value=3e-4,u.material.uniforms.mieDirectionalG.value=.99995,t.add(u),sunSphere=new THREE.Mesh(new THREE.SphereBufferGeometry(2e4,16,8),new THREE.MeshBasicMaterial({color:16777215})),sunSphere.visible=!1,t.add(sunSphere);var e=-.03*Math.PI,n=2*Math.PI*-.25;sunSphere.position.x=4e5*Math.cos(n),sunSphere.position.y=4e5*Math.sin(n)*Math.sin(e),sunSphere.position.z=4e5*Math.sin(n)*Math.cos(e),u.material.uniforms.sunPosition.value.copy(sunSphere.position)}function d(){o=window.innerWidth,s=window.innerHeight,a.aspect=o/s,a.updateProjectionMatrix(),n.setSize(o,s)}function c(e){var t,n;e.preventDefault(),"mousemove"==e.type?(t=e.clientX,n=e.clientY):(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY),l.x=t,l.y=n}function p(){requestAnimationFrame(p),l.xDamped=f(l.xDamped,l.x,.1),l.yDamped=f(l.yDamped,l.y,.1);var e,r,o,m=.001*performance.now();i.material.uniforms.time.value=m,i.material.uniforms.distortCenter.value=.1*Math.sin(m),i.material.uniforms.maxHeight.value=(e=l.yDamped,(o=20)+(e-(r=0))/(s-r)*(5-o)),n.render(t,a)}function f(e,t,n){return(1-n)*e+n*t}!function(){(function(){t=new THREE.Scene;var e=new THREE.Color(0);t.background=e,t.fog=new THREE.Fog(e,10,400),u(),(a=new THREE.PerspectiveCamera(60,o/s,.1,1e4)).position.y=8,a.position.z=4,ambientLight=new THREE.AmbientLight(16777215,1),t.add(ambientLight),(n=new THREE.WebGLRenderer({canvas:r,antialias:!0})).setPixelRatio=devicePixelRatio,n.setSize(o,s)})(),l=new THREE.PlaneBufferGeometry(100,400,400,400),f={time:{type:"f",value:0},distortCenter:{type:"f",value:.1},roadWidth:{type:"f",value:.5},pallete:{type:"t",value:null},speed:{type:"f",value:1},maxHeight:{type:"f",value:10},color:new THREE.Color(1,1,1)},h=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,f]),vertexShader:document.getElementById("custom-vertex").textContent,fragmentShader:document.getElementById("custom-fragment").textContent,wireframe:!1,fog:!0}),(i=new THREE.Mesh(l,h)).position.z=-180,i.rotation.x=-Math.PI/2,void t.add(i),void(new THREE.TextureLoader).load(e.palleteImage,(function(e){i.material.uniforms.pallete.value=e,i.material.needsUpdate=!0})),p(),m?window.addEventListener("touchmove",c,{passive:!1}):window.addEventListener("mousemove",c);var l,f,h;window.addEventListener("resize",d),d()}()}createLandscape({palleteImage:pallete});