function Particle(t,e,n){this.init(t,e,n)}!function(t,e){"object"==typeof exports?module.exports=e(t,t.document):"function"==typeof define&&define.amd?define((function(){return e(t,t.document)})):t.Sketch=e(t,t.document)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";function n(t){return"function"==typeof t}function o(t){return"string"==typeof t}function i(t,e,n){for(var o in e)!n&&o in t||(t[o]=e[o]);return t}function r(t,e){return function(){t.apply(e,arguments)}}function a(t){var e={};for(var o in t)"webkitMovementX"!==o&&"webkitMovementY"!==o&&(e[o]=n(t[o])?r(t[o],t):t[o]);return e}function s(t){function e(e){n(e)&&e.apply(t,[].splice.call(arguments,1))}function r(t){for(C=0;C<j.length;C++)o(T=j[C])?w[(t?"add":"remove")+"EventListener"].call(w,T,p,!1):n(T)?p=T:w=T}function s(){w=F?t.style:t.canvas,E=F?"px":"",W=t.width,B=t.height,t.fullscreen&&(B=t.height=y.innerHeight,W=t.width=y.innerWidth),t.retina&&H&&X&&(w.style.height=B+"px",w.style.width=W+"px",W*=X,B*=X),w.height!==B&&(w.height=B+E),w.width!==W&&(w.width=W+E),M&&e(t.resize)}function c(e,n){return function(e,n){b=n.getBoundingClientRect(),e.x=e.pageX-b.left-(y.scrollX||y.pageXOffset),e.y=e.pageY-b.top-(y.scrollY||y.pageYOffset),t.retina&&H&&X&&(e.x*=X,e.y*=X)}(e,t.element),(n=n||{}).ox=n.x||e.x,n.oy=n.y||e.y,n.x=e.x,n.y=e.y,n.dx=n.x-n.ox,n.dy=n.y-n.oy,n}function u(n){for(n=function(t){if(t.preventDefault(),(S=a(t)).originalEvent=t,S.touches)for(z.length=S.touches.length,C=0;C<S.touches.length;C++)z[C]=c(S.touches[C],z[C]);else z.length=0,z[0]=c(S,Y);return i(Y,z[0],!0),S}(n),N=(_=j.indexOf(A=n.type))-1,t.dragging=!!/down|start/.test(A)||!/up|end/.test(A)&&t.dragging;N;)o(j[N])?e(t[j[N--]],n):o(j[_])?e(t[j[_++]],n):N=0}function l(){t.now=+new Date,t.running=!0}function h(){t.running=!1}var d,p,w,P,b,C,E,O,T,S,A,R,L,N,_,W,B,D=0,z=[],G=!1,M=!1,X=y.devicePixelRatio||1,F=t.type==m,H=t.type==f,Y={x:0,y:0,ox:0,oy:0,dx:0,dy:0},j=[t.eventTarget||t.element,u,"mousedown","touchstart",u,"mousemove","touchmove",u,"mouseup","touchend",u,"click",u,"mouseout",u,"mouseover",g,function(n){R=n.keyCode,L="keyup"==n.type,q[R]=q[function(t){return x[t]||String.fromCharCode(t)}(R)]=!L,e(t[n.type],n)},"keydown","keyup",y,function(n){t.autopause&&("blur"==n.type?h:l)(),e(t[n.type],n)},"focus","blur",s,"resize"],q={};for(R in x)q[x[R]]=!1;return i(t,{touches:z,mouse:Y,keys:q,dragging:!1,running:!1,millis:0,now:NaN,dt:NaN,destroy:function(){P=t.element.parentNode,C=v.indexOf(t),P&&P.removeChild(t.element),~C&&v.splice(C,1),r(!1),h()},toggle:function(){(t.running?h:l)()},clear:function(){H&&t.clearRect(0,0,t.width,t.height)},start:l,stop:h}),v.push(t),t.autostart&&l(),r(!0),s(),function o(){k(d),d=I(o),M||(e(t.setup),M=n(t.setup)),G||(e(t.resize),G=n(t.resize)),t.running&&!D&&(t.dt=(O=+new Date)-t.now,t.millis+=t.dt,t.now=O,e(t.update),H&&(t.retina&&(t.save(),t.scale(X,X)),t.autoclear&&t.clear()),e(t.draw),H&&t.retina&&t.restore()),D=++D%t.interval}(),t}for(var c,u,l="E LN10 LN2 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos asin atan ceil cos exp floor log round sin sqrt tan atan2 pow max min".split(" "),h="__hasSketch",d=Math,f="canvas",p="webgl",m="dom",g=e,y=t,v=[],w={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,container:g.body,interval:1,globals:!0,retina:!1,type:f},x={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},P={CANVAS:f,WEB_GL:p,WEBGL:p,DOM:m,instances:v,install:function(t){if(!t[h]){for(var e=0;e<l.length;e++)t[l[e]]=d[l[e]];i(t,{TWO_PI:2*d.PI,HALF_PI:d.PI/2,QUARTER_PI:d.PI/4,random:function(t,e){return function(t){return"[object Array]"==Object.prototype.toString.call(t)}(t)?t[~~(d.random()*t.length)]:(function(t){return"number"==typeof t}(e)||(e=t||1,t=0),t+d.random()*(e-t))},lerp:function(t,e,n){return t+n*(e-t)},map:function(t,e,n,o,i){return(t-e)/(n-e)*(i-o)+o}}),t[h]=!0}},create:function(t){return(t=i(t||{},w)).globals&&P.install(self),c=t.element=t.element||g.createElement(t.type===m?"div":"canvas"),u=t.context=t.context||function(){switch(t.type){case f:return c.getContext("2d",t);case p:return c.getContext("webgl",t)||c.getContext("experimental-webgl",t);case m:return c.canvas=c}}(),(t.container||g.body).appendChild(c),P.augment(u,t)},augment:function(t,e){return(e=i(e||{},w)).element=t.canvas||t,e.element.className+=" sketch",i(t,e,!0),s(t)}},b=["ms","moz","webkit","o"],C=self,E=0,O="AnimationFrame",T="request"+O,S="cancel"+O,I=C[T],k=C[S],A=0;A<b.length&&!I;A++)I=C[b[A]+"Request"+O],k=C[b[A]+"Cancel"+O];return C[T]=I=I||function(t){var e=+new Date,n=d.max(0,16-(e-E)),o=setTimeout((function(){t(e+n)}),n);return E=e+n,o},C[S]=k=k||function(t){clearTimeout(t)},P})),Particle.prototype={init:function(t,e,n){this.alive=!0,this.radius=n||10,this.wander=.15,this.theta=random(TWO_PI),this.drag=.92,this.color="#fff",this.x=t||0,this.y=e||0,this.vx=0,this.vy=0},move:function(){this.x+=this.vx,this.y+=this.vy,this.vx*=this.drag,this.vy*=this.drag,this.theta+=random(-.5,.5)*this.wander,this.vx+=.1*sin(this.theta),this.vy+=.1*cos(this.theta),this.radius*=.96,this.alive=this.radius>.5},draw:function(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,TWO_PI),t.fillStyle=this.color,t.fill()}};var particles=[],pool=[],demo=Sketch.create({container:document.getElementById("particles")});demo.setup=function(){var t,e,n;for(t=0;t<20;t++)e=.5*demo.width+random(-100,100),n=.5*demo.height+random(-100,100),demo.spawn(e,n)},demo.spawn=function(t,e){particles.length>=MAX_PARTICLES&&pool.push(particles.shift()),particle=pool.length?pool.pop():new Particle,particle.init(t,e,random(5,40)),particle.wander=random(.5,2),particle.color=random(COLOURS),particle.drag=random(.9,.99),theta=random(TWO_PI),force=random(2,8),particle.vx=sin(theta)*force,particle.vy=cos(theta)*force,particles.push(particle)},demo.update=function(){var t,e;for(t=particles.length-1;t>=0;t--)(e=particles[t]).alive?e.move():pool.push(particles.splice(t,1)[0])},demo.draw=function(){demo.globalCompositeOperation="lighter";for(var t=particles.length-1;t>=0;t--)particles[t].draw(demo)},demo.mousemove=function(){var t,e,n,o,i;for(n=0,i=demo.touches.length;n<i;n++)for(t=demo.touches[n],e=random(1,4),o=0;o<e;o++)demo.spawn(t.x,t.y)};