!function(){"use strict";var e=.5*(Math.sqrt(3)-1),a=(3-Math.sqrt(3))/6,t=1/6,r=(Math.sqrt(5)-1)/4,n=(5-Math.sqrt(5))/20;function i(e){var a;a="function"==typeof e?e:e?function(){var e,a=0,t=0,r=0,n=1,i=(e=4022871197,function(a){a=a.toString();for(var t=0;t<a.length;t++){var r=.02519603282416938*(e+=a.charCodeAt(t));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});a=i(" "),t=i(" "),r=i(" ");for(var o=0;o<arguments.length;o++)(a-=i(arguments[o]))<0&&(a+=1),(t-=i(arguments[o]))<0&&(t+=1),(r-=i(arguments[o]))<0&&(r+=1);return i=null,function(){var e=2091639*a+2.3283064365386963e-10*n;return a=t,t=r,r=e-(n=0|e)}}(e):Math.random,this.p=o(a),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var t=0;t<512;t++)this.perm[t]=this.p[255&t],this.permMod12[t]=this.perm[t]%12}function o(e){var a,t=new Uint8Array(256);for(a=0;a<256;a++)t[a]=a;for(a=0;a<255;a++){var r=a+~~(e()*(256-a)),n=t[a];t[a]=t[r],t[r]=n}return t}i.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,r){var n,i,o=this.permMod12,c=this.perm,s=this.grad3,l=0,d=0,p=0,f=(t+r)*e,v=Math.floor(t+f),h=Math.floor(r+f),u=(v+h)*a,g=t-(v-u),b=r-(h-u);g>b?(n=1,i=0):(n=0,i=1);var P=g-n+a,w=b-i+a,x=g-1+2*a,m=b-1+2*a,M=255&v,y=255&h,I=.5-g*g-b*b;if(I>=0){var C=3*o[M+c[y]];l=(I*=I)*I*(s[C]*g+s[C+1]*b)}var S=.5-P*P-w*w;if(S>=0){var A=3*o[M+n+c[y+i]];d=(S*=S)*S*(s[A]*P+s[A+1]*w)}var L=.5-x*x-m*m;if(L>=0){var O=3*o[M+1+c[y+1]];p=(L*=L)*L*(s[O]*x+s[O+1]*m)}return 70*(l+d+p)},noise3D:function(e,a,r){var n,i,o,c,s,l,d,p,f,v,h=this.permMod12,u=this.perm,g=this.grad3,b=(e+a+r)*(1/3),P=Math.floor(e+b),w=Math.floor(a+b),x=Math.floor(r+b),m=(P+w+x)*t,M=e-(P-m),y=a-(w-m),I=r-(x-m);M>=y?y>=I?(s=1,l=0,d=0,p=1,f=1,v=0):M>=I?(s=1,l=0,d=0,p=1,f=0,v=1):(s=0,l=0,d=1,p=1,f=0,v=1):y<I?(s=0,l=0,d=1,p=0,f=1,v=1):M<I?(s=0,l=1,d=0,p=0,f=1,v=1):(s=0,l=1,d=0,p=1,f=1,v=0);var C=M-s+t,S=y-l+t,A=I-d+t,L=M-p+2*t,O=y-f+2*t,q=I-v+2*t,k=M-1+.5,z=y-1+.5,T=I-1+.5,_=255&P,F=255&w,H=255&x,R=.6-M*M-y*y-I*I;if(R<0)n=0;else{var D=3*h[_+u[F+u[H]]];n=(R*=R)*R*(g[D]*M+g[D+1]*y+g[D+2]*I)}var E=.6-C*C-S*S-A*A;if(E<0)i=0;else{var U=3*h[_+s+u[F+l+u[H+d]]];i=(E*=E)*E*(g[U]*C+g[U+1]*S+g[U+2]*A)}var G=.6-L*L-O*O-q*q;if(G<0)o=0;else{var N=3*h[_+p+u[F+f+u[H+v]]];o=(G*=G)*G*(g[N]*L+g[N+1]*O+g[N+2]*q)}var W=.6-k*k-z*z-T*T;if(W<0)c=0;else{var $=3*h[_+1+u[F+1+u[H+1]]];c=(W*=W)*W*(g[$]*k+g[$+1]*z+g[$+2]*T)}return 32*(n+i+o+c)},noise4D:function(e,a,t,i){var o,c,s,l,d,p,f,v,h,u,g,b,P,w,x,m,M,y=this.perm,I=this.grad4,C=(e+a+t+i)*r,S=Math.floor(e+C),A=Math.floor(a+C),L=Math.floor(t+C),O=Math.floor(i+C),q=(S+A+L+O)*n,k=e-(S-q),z=a-(A-q),T=t-(L-q),_=i-(O-q),F=0,H=0,R=0,D=0;k>z?F++:H++,k>T?F++:R++,k>_?F++:D++,z>T?H++:R++,z>_?H++:D++,T>_?R++:D++;var E=k-(p=F>=3?1:0)+n,U=z-(f=H>=3?1:0)+n,G=T-(v=R>=3?1:0)+n,N=_-(h=D>=3?1:0)+n,W=k-(u=F>=2?1:0)+2*n,$=z-(g=H>=2?1:0)+2*n,j=T-(b=R>=2?1:0)+2*n,B=_-(P=D>=2?1:0)+2*n,J=k-(w=F>=1?1:0)+3*n,K=z-(x=H>=1?1:0)+3*n,Q=T-(m=R>=1?1:0)+3*n,V=_-(M=D>=1?1:0)+3*n,X=k-1+4*n,Y=z-1+4*n,Z=T-1+4*n,ee=_-1+4*n,ae=255&S,te=255&A,re=255&L,ne=255&O,ie=.6-k*k-z*z-T*T-_*_;if(ie<0)o=0;else{var oe=y[ae+y[te+y[re+y[ne]]]]%32*4;o=(ie*=ie)*ie*(I[oe]*k+I[oe+1]*z+I[oe+2]*T+I[oe+3]*_)}var ce=.6-E*E-U*U-G*G-N*N;if(ce<0)c=0;else{var se=y[ae+p+y[te+f+y[re+v+y[ne+h]]]]%32*4;c=(ce*=ce)*ce*(I[se]*E+I[se+1]*U+I[se+2]*G+I[se+3]*N)}var le=.6-W*W-$*$-j*j-B*B;if(le<0)s=0;else{var de=y[ae+u+y[te+g+y[re+b+y[ne+P]]]]%32*4;s=(le*=le)*le*(I[de]*W+I[de+1]*$+I[de+2]*j+I[de+3]*B)}var pe=.6-J*J-K*K-Q*Q-V*V;if(pe<0)l=0;else{var fe=y[ae+w+y[te+x+y[re+m+y[ne+M]]]]%32*4;l=(pe*=pe)*pe*(I[fe]*J+I[fe+1]*K+I[fe+2]*Q+I[fe+3]*V)}var ve=.6-X*X-Y*Y-Z*Z-ee*ee;if(ve<0)d=0;else{var he=y[ae+1+y[te+1+y[re+1+y[ne+1]]]]%32*4;d=(ve*=ve)*ve*(I[he]*X+I[he+1]*Y+I[he+2]*Z+I[he+3]*ee)}return 27*(o+c+s+l+d)}},i._buildPermutationTable=o,"undefined"!=typeof define&&define.amd&&define((function(){return i})),"undefined"!=typeof exports?exports.SimplexNoise=i:"undefined"!=typeof window&&(window.SimplexNoise=i),"undefined"!=typeof module&&(module.exports=i)}();const{PI:PI,cos:cos,sin:sin,abs:abs,sqrt:sqrt,pow:pow,round:round,random:random,atan2:atan2}=Math,HALF_PI=.5*PI,TAU=2*PI,TO_RAD=PI/180,floor=e=>0|e,rand=e=>e*random(),randIn=(e,a)=>rand(a-e)+e,randRange=e=>e-rand(2*e),fadeIn=(e,a)=>e/a,fadeOut=(e,a)=>(a-e)/a,fadeInOut=(e,a)=>{let t=.5*a;return abs((e+t)%a-t)/t},dist=(e,a,t,r)=>sqrt(pow(t-e,2)+pow(r-a,2)),angle=(e,a,t,r)=>atan2(r-a,t-e),lerp=(e,a,t)=>(1-t)*e+t*a,particleCount=particle_coalesce,particlePropCount=9,particlePropsLength=9*particleCount,baseTTL=100,rangeTTL=500,baseSpeed=speed_coalesce,rangeSpeed=1,baseSize=2,rangeSize=10,baseHue=10,rangeHue=100,noiseSteps=2,xOff=.0025,yOff=.005,zOff=5e-4,backgroundColor=background_coalesce;let container,canvas,ctx,center,gradient,tick,particleProps,positions,velocities,lifeSpans,speeds,sizes,hues;function setup(){createCanvas(),resize(),initParticles(),draw()}function initParticles(){let e;for(tick=0,particleProps=new Float32Array(particlePropsLength),e=0;e<particlePropsLength;e+=9)initParticle(e)}function initParticle(e){let a,t,r,n,i,o,c,s,l,d;t=rand(canvas.a.width),r=rand(canvas.a.height),a=angle(t,r,center[0],center[1]),n=6*cos(a),i=6*sin(a),o=0,c=100+rand(500),s=baseSpeed+rand(1),l=2+rand(10),d=10+rand(100),particleProps.set([t,r,n,i,0,c,s,l,d],e)}function drawParticles(){let e;for(e=0;e<particlePropsLength;e+=9)updateParticle(e)}function updateParticle(e){let a,t,r,n,i,o,c,s,l,d,p,f,v=1+e,h=2+e,u=3+e,g=4+e,b=5+e,P=6+e,w=7+e,x=8+e;a=particleProps[e],t=particleProps[v],r=angle(a,t,center[0],center[1])+.75*HALF_PI,n=lerp(particleProps[h],2*cos(r),.05),i=lerp(particleProps[u],2*sin(r),.05),o=particleProps[g],c=particleProps[b],s=particleProps[P],l=a+n*s,d=t+i*s,p=particleProps[w],f=particleProps[x],drawParticle(a,t,r,o,c,p,f),o++,particleProps[e]=l,particleProps[v]=d,particleProps[h]=n,particleProps[u]=i,particleProps[g]=o,o>c&&initParticle(e)}function drawParticle(e,a,t,r,n,i,o){let c=e-.5*i,s=a-.5*i;ctx.a.save(),ctx.a.lineCap="round",ctx.a.lineWidth=1,ctx.a.strokeStyle=`hsla(${o},100%,60%,${fadeInOut(r,n)})`,ctx.a.beginPath(),ctx.a.translate(c,s),ctx.a.rotate(t),ctx.a.translate(-c,-s),ctx.a.strokeRect(c,s,i,i),ctx.a.closePath(),ctx.a.restore()}function createCanvas(){container=document.querySelector("#coalesce"),canvas={a:document.createElement("canvas"),b:document.createElement("canvas")},container.appendChild(canvas.b),ctx={a:canvas.a.getContext("2d"),b:canvas.b.getContext("2d")},center=[]}function resize(){const{innerWidth:e,innerHeight:a}=window;canvas.a.width=e,canvas.a.height=a,ctx.a.drawImage(canvas.b,0,0),canvas.b.width=e,canvas.b.height=a,ctx.b.drawImage(canvas.a,0,0),center[0]=.5*canvas.a.width,center[1]=.5*canvas.a.height}function renderGlow(){ctx.b.save(),ctx.b.filter="blur(8px) brightness(200%)",ctx.b.globalCompositeOperation="lighter",ctx.b.drawImage(canvas.a,0,0),ctx.b.restore(),ctx.b.save(),ctx.b.filter="blur(4px) brightness(200%)",ctx.b.globalCompositeOperation="lighter",ctx.b.drawImage(canvas.a,0,0),ctx.b.restore()}function render(){ctx.b.save(),ctx.b.globalCompositeOperation="lighter",ctx.b.drawImage(canvas.a,0,0),ctx.b.restore()}function draw(){tick++,ctx.a.clearRect(0,0,canvas.a.width,canvas.a.height),ctx.b.fillStyle=backgroundColor,ctx.b.fillRect(0,0,canvas.a.width,canvas.a.height),drawParticles(),renderGlow(),render(),window.requestAnimationFrame(draw)}window.addEventListener("load",setup),window.addEventListener("resize",resize);